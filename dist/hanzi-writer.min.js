/*! Hanzi Writer v1.0.0 | https://chanind.github.io/hanzi-writer */
!function(t){var i={};function n(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=i,n.d=function(t,i,r){n.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var i=t&&t.t?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=6)}([function(t,i,n){"use strict";(function(i){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var r=i.performance&&function(){return i.performance.now()}||function(){return Date.now()},s=i.requestAnimationFrame||function(t){return setTimeout(function(){return t(r())},1e3/60)},o=i.cancelAnimationFrame||clearTimeout,e=function(t){for(var i=Object(t),n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.forEach(function(t){if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}),i},h=Object.assign||e;var u=0;t.exports={r:e,arrLast:function(t){return t[t.length-1]},assign:h,average:function(t){return t.reduce(function(t,i){return i+t},0)/t.length},callIfExists:function(t,i){return t&&t(i),i},cancelAnimationFrame:o,copyAndMergeDeep:function t(i,r){var s=h({},i);for(var o in r){var e=i[o],u=r[o];e!==u&&(e&&u&&"object"===(void 0===e?"undefined":n(e))&&"object"===(void 0===u?"undefined":n(u))&&!Array.isArray(u)?s[o]=t(e,u):s[o]=u)}return s},counter:function(){return++u},emptyFunc:function(){},inflate:function(t,i){for(var n=t.split("."),r={},s=r,o=0;o<n.length;o++){var e=o===n.length-1?i:{};s[n[o]]=e,s=e}return r},objRepeat:function(t,i){for(var n={},r=0;r<i;r++)n[r]=t;return n},performanceNow:r,requestAnimationFrame:s,timeout:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(i,n){setTimeout(i,t)})},trim:function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}}}).call(i,n(3))},function(t,i,n){"use strict";(function(i){var r=n(2).round;function s(t){return i.document.createElementNS("http://www.w3.org/2000/svg",t)}function o(t,i,n){t.setAttributeNS(null,i,n)}function e(t,i){Object.keys(i).forEach(function(n){return o(t,n,i[n])})}function h(t,i){this.svg=t,this.defs=i}h.prototype.createSubCanvas=function(){var t=s("g");return this.svg.appendChild(t),new h(t,this.defs)},h.init=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100%",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"100%",o=void 0,u=t;"string"==typeof t&&(u=i.document.getElementById(t));var a=u.nodeName.toUpperCase();"SVG"===a||"G"===a?o=u:(o=s("svg"),u.appendChild(o)),e(o,{width:n,height:r});var c=s("defs");return o.appendChild(c),new h(o,c)},t.exports={createElm:s,attrs:e,attr:o,Canvas:h,getPathString:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r(t[0]),s=t.slice(1),o="M "+n.x+" "+n.y;return s.forEach(function(t){var i=r(t);o+=" L "+i.x+" "+i.y}),i&&(o+="Z"),o},removeElm:function(t){t&&t.parentNode.removeChild(t)}}}).call(i,n(3))},function(t,i,n){"use strict";var r=n(0),s=r.average,o=r.arrLast,e=function(t,i){return{x:t.x-i.x,y:t.y-i.y}},h=function(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))},u=function(t,i){return h(e(t,i))},a=function(t,i,n){var r=e(i,t),s=n/h(r);return{x:i.x+s*r.x,y:i.y+s*r.y}},c=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05,n=t.slice(0,1);return t.slice(1).forEach(function(t){var r=n[n.length-1],s=u(t,r);if(s>i)for(var o=Math.ceil(s/i),e=s/o,h=0;h<o;h++)n.push(a(t,r,-1*e*(h+1)));else n.push(t)}),n};t.exports={round:function(t){var i=10*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1);return{x:Math.round(i*t.x)/i,y:Math.round(i*t.y)/i}},equals:function(t,i){return t.x===i.x&&t.y===i.y},distance:u,frechetDist:function(t,i){for(var n=[],r=0;r<t.length;r++){n.push([]);for(var s=0;s<i.length;s++)n[r].push(-1)}return function r(s,o){return n[s][o]>-1?n[s][o]:(n[s][o]=0===s&&0===o?u(t[0],i[0]):s>0&&0===o?Math.max(r(s-1,0),u(t[s],i[0])):0===s&&o>0?Math.max(r(0,o-1),u(t[0],i[o])):s>0&&o>0?Math.max(Math.min(r(s-1,o),r(s-1,o-1),r(s,o-1)),u(t[s],i[o])):1/0,n[s][o])}(t.length-1,i.length-1)},length:function(t){var i=t[0];return t.slice(1).reduce(function(t,n){var r=u(n,i);return i=n,t+r},0)},rotate:function(t,i){return t.map(function(t){return{x:Math.cos(i)*t.x-Math.sin(i)*t.y,y:Math.sin(i)*t.x+Math.cos(i)*t.y}})},subtract:e,cosineSimilarity:function(t,i){return(t.x*i.x+t.y*i.y)/h(t)/h(i)},extendPointOnLine:a,filterParallelPoints:function(t){if(t.length<3)return t;var i=[t[0],t[1]];return t.slice(2).forEach(function(t,n){var r=i.length,s=e(t,i[r-1]),o=e(i[r-1],i[r-2]);s.y*o.x-s.x*o.y==0&&i.pop(),i.push(t)}),i},subdivideCurve:c,normalizeCurve:function(t){var i={x:s([t[0].x,o(t).x]),y:s([t[0].y,o(t).y])},n=t.map(function(t){return e(t,i)}),r=Math.sqrt(s([Math.pow(n[0].x,2)+Math.pow(n[0].y,2),Math.pow(o(n).x,2)+Math.pow(o(n).y,2)])),h=n.map(function(t){return{x:t.x/r,y:t.y/r}});return c(h)}}},function(t,i){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,i,n){"use strict";var r=n(5),s=n(0).objRepeat,o=function(t,i,n){return[new r("character."+t+".strokes",s({opacity:1,displayPortion:1},i.strokes.length),{duration:n,force:!0})]},e=function(t,i,n){return[new r("character."+t+".opacity",0,{duration:n,force:!0})].concat(o(t,i,0))},h=function(t,i,n){var s,o,e,h=i.strokeNum,u=(i.getLength()+600)/(3*n);return[new r("character."+t,{opacity:1,strokes:(s={},o=h,e={displayPortion:0,opacity:1},o in s?Object.defineProperty(s,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[o]=e,s)}),new r("character."+t+".strokes."+h+".displayPortion",1,{duration:u})]},u=function(t,i,n,u,a){var c=e(t,i,n);return(c=c.concat(o(t,i,0))).push(new r("character."+t,{opacity:1,strokes:s({opacity:0},i.strokes.length)},{force:!0})),i.strokes.forEach(function(i,n){n>0&&c.push(new r.Pause(a)),c=c.concat(h(t,i,u))}),c};t.exports={showStrokes:o,showCharacter:function(t,i,n){return[new r("character."+t,{opacity:1,strokes:s({opacity:1,displayPortion:1},i.strokes.length)},{duration:n,force:!0})]},hideCharacter:e,animateCharacter:u,animateCharacterLoop:function(t,i,n,s,o,e){var h=u(t,i,n,s,o);return h.push(new r.Pause(e)),h},animateStroke:h,showStroke:function(t,i,n){return[new r("character."+t+".strokes."+i,{displayPortion:1,opacity:1},{duration:n,force:!0})]}}},function(t,i,n){"use strict";var r=n(0),s=r.inflate,o=r.performanceNow,e=r.requestAnimationFrame,h=r.cancelAnimationFrame;function u(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scope=t,this.e=s(t,i),this.h=n.duration||0,this.u=n.force,this.a=this.f.bind(this)}function a(t){this.h=t}u.prototype.run=function(t){var i=this;return 0===this.h&&t.updateState(this.e),0===this.h||function t(i,n){for(var r in n)if(n.hasOwnProperty(r)){var s=n[r],o=i[r];if(s>=0){if(s!==o)return!1}else if(!t(o,s))return!1}return!0}(t.state,this.e)?Promise.resolve():(this.v=t,this.w=t.state,this.g=o(),this.k=e(this.a),new Promise(function(t){i.b=t}))},u.prototype.f=function(t){var i,n=Math.min(1,(t-this.g)/this.h);if(1===n)this.v.updateState(this.e),this.k=null,this.cancel(this.v);else{var r=(i=n,-Math.cos(i*Math.PI)/2+.5);this.v.updateState(function t(i,n,r){var s={};for(var o in n){var e=n[o],h=i[o];s[o]=e>=0?r*(e-h)+h:t(h,e,r)}return s}(this.w,this.e,r)),this.k=e(this.a)}},u.prototype.cancel=function(t){this.b&&this.b(),this.b=null,this.k&&h(this.k),this.k=null,this.u&&t.updateState(this.e)},a.prototype.run=function(){var t=this,i=new Promise(function(i){t.b=i});return this.M=setTimeout(function(){return t.cancel()},this.h),i},a.prototype.cancel=function(){clearTimeout(this.M),this.b&&this.b(),this.b=!1},u.Pause=a,t.exports=u},function(t,i,n){"use strict";(function(i){var r=n(7),s=n(11),o=n(12),e=n(15),h=n(16),u=n(1),a=n(20),c=n(21),f=n(4),v=n(0),l=v.assign,d=v.callIfExists,y=v.trim,p={charDataLoader:a,onLoadCharDataError:null,onLoadCharDataSuccess:null,showOutline:!0,showCharacter:!0,width:null,height:null,padding:20,strokeAnimationSpeed:1,strokeFadeDuration:400,strokeHighlightDuration:200,strokeHighlightSpeed:2,delayBetweenStrokes:1e3,delayBetweenLoops:2e3,strokeColor:"#555",radicalColor:null,highlightColor:"#AAF",outlineColor:"#DDD",drawingColor:"#333",leniency:1,showHintAfterMisses:3,highlightOnComplete:!0,highlightCompleteColor:null,drawingFadeDuration:300,drawingWidth:4,strokeWidth:2,outlineWidth:2};function w(){if(arguments.length>0){var t=void 0,i={},n=arguments.length<=0?void 0:arguments[0];arguments.length>1&&("string"==typeof(arguments.length<=1?void 0:arguments[1])?(console.warn("Using new HanziWriter() to set a character is deprecated. Use HanziWriter.create() instead"),t=arguments.length<=1?void 0:arguments[1],i=(arguments.length<=2?void 0:arguments[2])||{}):i=arguments.length<=1?void 0:arguments[1]),this.S(n,i),t&&this.setCharacter(t)}}w.prototype.showCharacter=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.C(function(){return t.v.run(f.showCharacter("main",t.P,"number"==typeof i.duration?i.duration:t.j.strokeFadeDuration)).then(function(t){return d(i.onComplete,t)})})},w.prototype.hideCharacter=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.C(function(){return t.v.run(f.hideCharacter("main",t.P,"number"==typeof i.duration?i.duration:t.j.strokeFadeDuration)).then(function(t){return d(i.onComplete,t)})})},w.prototype.animateCharacter=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.cancelQuiz(),this.C(function(){return t.v.run(f.animateCharacter("main",t.P,t.j.strokeFadeDuration,t.j.strokeAnimationSpeed,t.j.delayBetweenStrokes)).then(function(t){return d(i.onComplete,t)})})},w.prototype.loopCharacterAnimation=function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.cancelQuiz(),this.C(function(){return t.v.run(f.animateCharacterLoop("main",t.P,t.j.strokeFadeDuration,t.j.strokeAnimationSpeed,t.j.delayBetweenStrokes,t.j.delayBetweenLoops),{loop:!0})})},w.prototype.showOutline=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.C(function(){return t.v.run(f.showCharacter("outline",t.P,"number"==typeof i.duration?i.duration:t.j.strokeFadeDuration)).then(function(t){return d(i.onComplete,t)})})},w.prototype.hideOutline=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.C(function(){return t.v.run(f.hideCharacter("outline",t.P,"number"==typeof i.duration?i.duration:t.j.strokeFadeDuration)).then(function(t){return d(i.onComplete,t)})})},w.prototype.quiz=function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.C(function(){t.cancelQuiz(),t.O=new h(t.P,t.v,t.F),t.O.startQuiz(l({},t.j,i))})},w.prototype.cancelQuiz=function(){this.O&&(this.O.cancel(),this.O=null)},w.prototype.setCharacter=function(t){var i=this;return this.cancelQuiz(),this.D=t,this.A&&this.A.destroy(),this.v&&this.v.cancelAll(),this.A=null,this.U=this.L.loadCharData(t).then(function(n){if(!i.L.loadingFailed){var h=new o;i.P=h.generateCharacter(t,n),i.F=new e(i.j),i.A=new r(i.P,i.F),i.v=new s(i.P,i.j,function(t){i.A.render(t)}),i.A.mount(i.T,i.v.state),i.A.render(i.v.state)}}),this.U},w.prototype.S=function(t,i){return this.T=u.Canvas.init(t,i.width,i.height),this.T.svg.createSVGPoint&&(this.W=this.T.svg.createSVGPoint()),this.j=this._(i),this.L=new c(this.j),this.z(),this.O=null,this},w.prototype._=function(t){var i=l({},p,t);return t.strokeAnimationDuration&&!t.strokeAnimationSpeed&&(i.strokeAnimationSpeed=500/i.strokeAnimationDuration),t.strokeHighlightDuration&&!t.strokeHighlightSpeed&&(i.strokeHighlightSpeed=500/i.strokeHighlightDuration),t.highlightCompleteColor||(i.highlightCompleteColor=i.highlightColor),this.H(i)},w.prototype.H=function(t){var i=l({},t);if(i.width&&!i.height)i.height=i.width;else if(i.height&&!i.width)i.width=i.height;else if(!i.width&&!i.height){var n=this.T.svg.getBoundingClientRect(),r=n.width,s=n.height,o=Math.min(r,s);i.width=o,i.height=o}return i},w.prototype.C=function(t){var i=this;if(this.L.loadingFailed)throw Error("Failed to load character data. Call setCharacter and try again.");return this.U.then(function(){if(!i.L.loadingFailed)return t()})},w.prototype.z=function(){var t=this;this.T.svg.addEventListener("mousedown",function(i){!t.isLoadingCharData&&t.O&&(i.preventDefault(),t.N("startUserStroke",t.q(i)))}),this.T.svg.addEventListener("touchstart",function(i){!t.isLoadingCharData&&t.O&&(i.preventDefault(),t.N("startUserStroke",t.G(i)))}),this.T.svg.addEventListener("mousemove",function(i){!t.isLoadingCharData&&t.O&&(i.preventDefault(),t.N("continueUserStroke",t.q(i)))}),this.T.svg.addEventListener("touchmove",function(i){!t.isLoadingCharData&&t.O&&(i.preventDefault(),t.N("continueUserStroke",t.G(i)))}),i.document.addEventListener("mouseup",function(){return t.N("endUserStroke")}),i.document.addEventListener("touchend",function(){return t.N("endUserStroke")})},w.prototype.N=function(t){var i;if(this.O){for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];(i=this.O)[t].apply(i,r)}},w.prototype.q=function(t){if(this.W){this.W.x=t.clientX,this.W.y=t.clientY;var i=this.W.matrixTransform(this.T.svg.getScreenCTM().inverse());return{x:i.x,y:i.y}}var n=this.T.svg.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}},w.prototype.G=function(t){if(this.W){this.W.x=t.touches[0].clientX,this.W.y=t.touches[0].clientY;var i=this.W.matrixTransform(this.T.svg.getScreenCTM().inverse());return{x:i.x,y:i.y}}var n=this.T.svg.getBoundingClientRect();return{x:t.touches[0].clientX-n.left,y:t.touches[0].clientY-n.top}},w.create=function(t,i){var n=new w(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return n.setCharacter(i),n};var m=null,g=null;if(w.loadCharacterData=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0;return n=m&&g===i?m:new c(l({},p,i)),m=n,g=i,n.loadCharData(t)},w.getScalingTransform=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new e({width:t,height:i,padding:n});return{x:r.getXOffset(),y:r.getYOffset(),scale:r.getScale(),transform:y("\n      translate("+r.getXOffset()+", "+(r.getHeight()-r.getYOffset())+")\n      scale("+r.getScale()+", "+-1*r.getScale()+")\n    ").replace(/\s+/g," ")}},void 0!==i.window){var k=i.window.HanziWriter;w.noConflict=function(){return i.window.HanziWriter=k,w},i.window.HanziWriter=w}t.exports=w}).call(i,n(3))},function(t,i,n){"use strict";var r=n(8),s=n(10),o=n(0).assign,e=n(1);function h(t,i){this.P=t,this.F=i,this.I=new r(t),this.R=new r(t),this.B=new r(t),this.V={}}h.prototype.mount=function(t){var i=t.createSubCanvas(),n=i.svg;e.attr(n,"transform","\n    translate("+this.F.getXOffset()+", "+(this.F.getHeight()-this.F.getYOffset())+")\n    scale("+this.F.getScale()+", "+-1*this.F.getScale()+")\n  "),this.R.mount(i),this.I.mount(i),this.B.mount(i),this.J=i},h.prototype.render=function(t){var i=this;this.R.render(t.character.outline),this.I.render(t.character.main),this.B.render(t.character.highlight);var n=t.userStrokes||{};Object.keys(this.V).forEach(function(t){n[t]||(i.V[t].destroy(),delete i.V[t])}),Object.keys(n).forEach(function(r){if(n[r]){var e=o({strokeWidth:t.options.drawingWidth,strokeColor:t.options.drawingColor},n[r]),h=i.V[r];h||((h=new s).mount(i.J,e),i.V[r]=h),h.render(e)}})},h.prototype.destroy=function(){e.removeElm(this.J.svg),this.J.defs.innerHTML=""},t.exports=h},function(t,i,n){"use strict";var r=n(9);function s(t){this.Q={},this.character=t,this.strokeRenderers=this.character.strokes.map(function(t){return new r(t)})}s.prototype.mount=function(t){var i=t.createSubCanvas();this.Z=i.svg,this.strokeRenderers.forEach(function(t,n){t.mount(i)})},s.prototype.render=function(t){if(t!==this.Q){t.opacity!==this.Q.opacity&&(this.Z.style.opacity=t.opacity,0===t.opacity?this.Z.style.display="none":0===this.Q.opacity&&(this.Z.style.display="initial"));for(var i=0;i<this.strokeRenderers.length;i++)this.strokeRenderers[i].render({strokeColor:t.strokeColor,radicalColor:t.radicalColor,opacity:t.strokes[i].opacity,displayPortion:t.strokes[i].displayPortion});this.Q=t}},t.exports=s},function(t,i,n){"use strict";var r=n(0).counter,s=n(1),o=n(2),e=o.extendPointOnLine,h=o.filterParallelPoints,u=200;function a(t){this.Q={},this.$=t,this.K=t.getLength()+u/2}a.prototype.mount=function(t){this.X=s.createElm("path"),this.Y=s.createElm("clipPath"),this.tt=s.createElm("path");var i="mask-"+r();s.attr(this.Y,"id",i),s.attr(this.tt,"d",this.$.path),this.X.style.opacity=0,s.attr(this.X,"clip-path","url(#"+i+")");var n=function(t,i){if(t.length<2)return t;var n=t[1],r=t[0],s=e(n,r,i),o=t.slice(1);return o.unshift(s),o}(h(this.$.points),u/2);return s.attr(this.X,"d",s.getPathString(n)),s.attrs(this.X,{stroke:"#FFFFFF","stroke-width":u,fill:"none","stroke-linecap":"round","stroke-linejoin":"miter","stroke-dasharray":this.K+","+this.K}),this.Y.appendChild(this.tt),t.defs.appendChild(this.Y),t.svg.appendChild(this.X),this},a.prototype.render=function(t){if(t!==this.Q){t.displayPortion!==this.Q.displayPortion&&(this.X.style.strokeDashoffset=this.it(t.displayPortion));var i=this.nt(t);i!==this.nt(this.Q)&&s.attrs(this.X,{stroke:i}),t.opacity!==this.Q.opacity&&(this.X.style.opacity=t.opacity),this.Q=t}},a.prototype.it=function(t){return.999*this.K*(1-t)},a.prototype.nt=function(t){var i=t.strokeColor,n=t.radicalColor;return n&&this.$.isInRadical?n:i},t.exports=a},function(t,i,n){"use strict";var r=n(1);function s(){this.Q={}}s.prototype.mount=function(t){this.rt=r.createElm("path"),t.svg.appendChild(this.rt)},s.prototype.render=function(t){t!==this.Q&&(t.strokeColor===this.Q.strokeColor&&t.strokeWidth===this.Q.strokeWidth||r.attrs(this.rt,{fill:"none",stroke:t.strokeColor,"stroke-width":t.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round"}),t.opacity!==this.Q.opacity&&r.attr(this.rt,"opacity",t.opacity),t.points!==this.Q.points&&r.attr(this.rt,"d",r.getPathString(t.points)),this.Q=t)},s.prototype.destroy=function(){r.removeElm(this.rt)},t.exports=s},function(t,i,n){"use strict";var r=n(0).copyAndMergeDeep;function s(t,i,n){this.st=n,this.ot=[],this.state={options:{drawingFadeDuration:i.drawingFadeDuration,drawingWidth:i.drawingWidth,drawingColor:i.drawingColor},character:{main:{strokeColor:i.strokeColor,radicalColor:i.radicalColor,opacity:i.showCharacter?1:0,strokes:{}},outline:{strokeColor:i.outlineColor,opacity:i.showOutline?1:0,strokes:{}},highlight:{strokeColor:i.highlightColor,opacity:1,strokes:{}}},userStrokes:null};for(var r=0;r<t.strokes.length;r++)this.state.character.main.strokes[r]={opacity:1,displayPortion:1},this.state.character.outline.strokes[r]={opacity:1,displayPortion:1},this.state.character.highlight.strokes[r]={opacity:0,displayPortion:1}}s.prototype.updateState=function(t){var i=r(this.state,t);this.st(i,this.state),this.state=i},s.prototype.run=function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.map(function(t){return t.scope}).filter(function(t){return t});return this.cancelMutations(r),new Promise(function(s){var o={et:!0,ht:0,b:s,ut:t,at:n.loop,ct:r};i.ot.push(o),i.ft(o)})},s.prototype.ft=function(t){var i=this;if(t.et){var n=t.ut;if(t.ht>=n.length){if(!t.at)return t.et=!1,this.ot=this.ot.filter(function(i){return i!==t}),void t.b({canceled:!1});t.ht=0}t.ut[t.ht].run(this).then(function(){t.et&&(t.ht++,i.ft(t))})}},s.prototype.cancelMutations=function(t){var i=this;this.ot.forEach(function(n){n.ct.forEach(function(r){t.forEach(function(t){(r.indexOf(t)>=0||t.indexOf(r)>=0)&&i.vt(n)})})})},s.prototype.cancelAll=function(){this.cancelMutations([""])},s.prototype.vt=function(t){t.et=!1;for(var i=t.ht;i<t.ut.length;i++)t.ut[i].cancel(this);t.b&&t.b({canceled:!0}),this.ot=this.ot.filter(function(i){return i!==t})},t.exports=s},function(t,i,n){"use strict";var r=function(){return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],r=!0,s=!1,o=void 0;try{for(var e,h=t[Symbol.iterator]();!(r=(e=h.next()).done)&&(n.push(e.value),!i||n.length!==i);r=!0);}catch(t){s=!0,o=t}finally{try{!r&&h.return&&h.return()}finally{if(s)throw o}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=n(13),o=n(14);function e(){}e.prototype.generateCharacter=function(t,i){var n=this.generateStrokes(i);return new o(t,n)},e.prototype.generateStrokes=function(t){return t.strokes.map(function(i,n){var o,e=t.medians[n].map(function(t){var i=r(t,2);return{x:i[0],y:i[1]}});return new s(i,e,n,(o=n,t.radStrokes&&t.radStrokes.indexOf(o)>=0))})},t.exports=e},function(t,i,n){"use strict";var r=n(2),s=r.subtract,o=r.distance,e=r.length;function h(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.path=t,this.points=i,this.strokeNum=n,this.isInRadical=r}h.prototype.getStartingPoint=function(){return this.points[0]},h.prototype.getEndingPoint=function(){return this.points[this.points.length-1]},h.prototype.getLength=function(){return e(this.points)},h.prototype.getVectors=function(){var t=this.points[0];return this.points.slice(1).map(function(i){var n=s(i,t);return t=i,n})},h.prototype.getDistance=function(t){var i=this.points.map(function(i){return o(i,t)});return Math.min.apply(Math,i)},h.prototype.getAverageDistance=function(t){var i=this;return t.reduce(function(t,n){return t+i.getDistance(n)},0)/t.length},t.exports=h},function(t,i,n){"use strict";t.exports=function(t,i){this.symbol=t,this.strokes=i}},function(t,i,n){"use strict";var r=[{x:0,y:-124},{x:1024,y:900}];function s(t){this.j=t,this.lt()}s.prototype.convertExternalPoint=function(t){return{x:(t.x-this.dt)/this.yt,y:(this.getHeight()-this.pt-t.y)/this.yt}},s.prototype.getXOffset=function(){return this.dt},s.prototype.getYOffset=function(){return this.pt},s.prototype.getScale=function(){return this.yt},s.prototype.getHeight=function(){return this.j.height},s.prototype.lt=function(){var t=r,i=t[1].x-t[0].x,n=t[1].y-t[0].y,s=this.j.width-2*this.j.padding,o=this.j.height-2*this.j.padding,e=s/i,h=o/n;this.yt=Math.min(e,h);var u=this.j.padding+(s-this.yt*i)/2,a=this.j.padding+(o-this.yt*n)/2;this.dt=-1*t[0].x*this.yt+u,this.pt=-1*t[0].y*this.yt+a},t.exports=s},function(t,i,n){"use strict";var r=n(17),s=n(18),o=n(0),e=o.callIfExists,h=o.counter,u=n(19),a=n(1),c=n(2),f=n(4),v=function(t){return{pathString:a.getPathString(t.externalPoints),points:t.points.map(function(t){return c.round(t)})}};function l(t,i,n){this.P=t,this.v=i,this.et=!1,this.F=n}l.prototype.startQuiz=function(t){this.et=!0,this.j=t,this.wt=0,this.mt=0,this.gt=0,this.kt=[],this.v.run(u.startQuiz(this.P,t.strokeFadeDuration))},l.prototype.startUserStroke=function(t){var i=this.F.convertExternalPoint(t);if(!this.et)return null;if(this.bt)return this.endUserStroke();var n=h();this.bt=new s(n,i,t),this.v.run(u.startUserStroke(n,i))},l.prototype.continueUserStroke=function(t){if(this.bt){var i=this.F.convertExternalPoint(t);this.bt.appendPoint(i,t);var n=this.bt.points.slice(0);this.v.run(u.updateUserStroke(this.bt.id,n))}},l.prototype.endUserStroke=function(){if(this.bt)if(this.v.run(u.removeUserStroke(this.bt.id,this.j.drawingFadeDuration)),1!==this.bt.points.length){var t=this.Mt(),i=this.v.state.character.outline.opacity>0;r(this.bt,this.P,this.wt,{isOutlineVisible:i,leniency:this.j.leniency})?this.St(t):(this.Ct(),this.mt>=this.j.showHintAfterMisses&&this.v.run(u.highlightStroke(t,this.j.highlightColor,this.j.strokeHighlightSpeed))),this.bt=null}else this.bt=null},l.prototype.cancel=function(){this.et=!1,this.bt&&this.v.run(u.removeUserStroke(this.bt.id,this.j.drawingFadeDuration))},l.prototype.St=function(t){e(this.j.onCorrectStroke,{character:this.P.symbol,strokeNum:this.wt,mistakesOnStroke:this.mt,totalMistakes:this.gt,strokesRemaining:this.P.strokes.length-this.wt-1,drawnPath:v(this.bt)});var i=f.showStroke("main",this.wt,this.j.strokeFadeDuration);this.wt+=1,this.mt=0,this.wt===this.P.strokes.length&&(this.et=!1,e(this.j.onComplete,{character:this.P.symbol,totalMistakes:this.gt}),this.j.highlightOnComplete&&(i=i.concat(u.highlightCompleteChar(this.P,this.j.highlightCompleteColor,2*this.j.strokeHighlightDuration)))),this.v.run(i)},l.prototype.Ct=function(){this.mt+=1,this.gt+=1,e(this.j.onMistake,{character:this.P.symbol,strokeNum:this.wt,mistakesOnStroke:this.mt,totalMistakes:this.gt,strokesRemaining:this.P.strokes.length-this.wt,drawnPath:v(this.bt)})},l.prototype.Mt=function(){return this.P.strokes[this.wt]},t.exports=l},function(t,i,n){"use strict";var r=n(0).average,s=n(2),o=s.cosineSimilarity,e=s.equals,h=s.frechetDist,u=s.distance,a=s.subtract,c=s.normalizeCurve,f=s.rotate,v=s.length,l=function(t,i){var n,s,e,h=(s=[],e=(n=t)[0],n.slice(1).forEach(function(t){s.push(a(t,e)),e=t}),s),u=i.getVectors(),c=h.map(function(t){var i=u.map(function(i){return o(i,t)});return Math.max.apply(Math,i)});return r(c)>0},d=[Math.PI/16,Math.PI/32,0,-1*Math.PI/32,-1*Math.PI/16],y=function(t,i,n){var r=n.leniency,s=void 0===r?1:r,o=n.isOutlineVisible,e=void 0!==o&&o,a=i.getAverageDistance(t),y=a<=350*(e||i.strokeNum>0?.5:1)*s;if(!y)return{isMatch:!1,avgDist:a};var p,w,m,g,k,b,M,S,C,P,j,x,O=(p=t,m=s,g=u((w=i).getStartingPoint(),p[0]),k=u(w.getEndingPoint(),p[p.length-1]),g<=250*m&&k<=250*m),F=l(t,i),D=(b=t,M=i.points,S=s,C=c(b,2),P=c(M,2),j=1/0,d.forEach(function(t){var i=h(C,f(P,t));i<j&&(j=i)}),j<=.75*S),A=(x=i,s*(v(t)+25)/(x.getLength()+25)>=.35);return{isMatch:y&&O&&F&&D&&A,avgDist:a}};t.exports=function(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=function(t){if(t.length<2)return t;var i=[t[0]];return t.slice(1).forEach(function(t){e(t,i[i.length-1])||i.push(t)}),i}(t.points);if(s.length<2)return null;var o=y(s,i.strokes[n],r);if(!o.isMatch)return!1;for(var h=i.strokes.slice(n+1),u=0;u<h.length;u++){var a=y(s,h[u],r);if(a.isMatch&&a.avgDist<o.avgDist)return!1}return!0}},function(t,i,n){"use strict";function r(t,i,n){this.id=t,this.points=[i],this.externalPoints=[n]}r.prototype.appendPoint=function(t,i){this.points.push(t),this.externalPoints.push(i)},t.exports=r},function(t,i,n){"use strict";var r=n(5),s=n(4),o=n(0).objRepeat;t.exports={highlightCompleteChar:function(t,i,n){return[new r("character.highlight.strokeColor",i)].concat(s.hideCharacter("highlight",t)).concat(s.showCharacter("highlight",t,n/2)).concat(s.hideCharacter("highlight",t,n/2))},highlightStroke:function(t,i,n){var s,o,e,h=t.strokeNum,u=(t.getLength()+600)/(3*n);return[new r("character.highlight.strokeColor",i),new r("character.highlight",{opacity:1,strokes:(s={},o=h,e={displayPortion:0,opacity:0},o in s?Object.defineProperty(s,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[o]=e,s)}),new r("character.highlight.strokes."+h,{displayPortion:1,opacity:1},{duration:u}),new r("character.highlight.strokes."+h+".opacity",0,{duration:u})]},startQuiz:function(t,i){return s.hideCharacter("main",t,i).concat([new r("character.highlight",{opacity:1,strokes:o({opacity:0},t.strokes.length)},{force:!0}),new r("character.main",{opacity:1,strokes:o({opacity:0},t.strokes.length)},{force:!0})])},startUserStroke:function(t,i){return[new r("quiz.activeUserStrokeId",t,{force:!0}),new r("userStrokes."+t,{points:[i],opacity:1},{force:!0})]},updateUserStroke:function(t,i){return[new r("userStrokes."+t+".points",i,{force:!0})]},removeUserStroke:function(t,i){return[new r("userStrokes."+t+".opacity",0,{duration:i}),new r("userStrokes."+t,null,{force:!0})]}}},function(t,i,n){"use strict";(function(i){t.exports=function(t,n,r){var s=new i.XMLHttpRequest;s.overrideMimeType&&s.overrideMimeType("application/json"),s.open("GET","https://cdn.jsdelivr.net/npm/hanzi-writer-data@2.0/"+t+".json",!0),s.onerror=function(t){r(s,t)},s.onreadystatechange=function(){4===s.readyState&&(200===s.status?n(JSON.parse(s.responseText)):0!==s.status&&r&&r(s))},s.send(null)}}).call(i,n(3))},function(t,i,n){"use strict";var r=n(0).callIfExists;function s(t){this.Pt=0,this.j=t,this.jt=!1,this.xt=null,this.loadingFailed=!1}s.prototype.Ot=function(t,i){var n=this,r=function(t){i===n.Pt&&n.b(t)},s=this.j.charDataLoader(t,r,function(t){i===n.Pt&&n.Ft(t)});s&&r(s)},s.prototype.Dt=function(){var t=this;this.xt=new Promise(function(i,n){t.b=i,t.Ft=n}).then(function(i){return t.jt=!1,r(t.j.onLoadCharDataSuccess,i),i},function(i){if(t.jt=!1,t.loadingFailed=!0,r(t.j.onLoadCharDataError,i),!t.j.onLoadCharDataError){if(i instanceof Error)throw i;var n=new Error("Failed to load char data for "+t.At);throw n.reason=i,n}})},s.prototype.loadCharData=function(t){return this.At=t,this.jt||this.Dt(),this.loadingFailed=!1,this.jt=!0,this.Pt++,this.Ot(t,this.Pt),this.xt},t.exports=s}]);